#{extends 'main.html' /}
#{set title:'Topics' /}

<div class="page-header">
    <h1>Services</h1>
</div>

#{ifErrors}
	<div class="alert-message error">
        <a class="close" href="#">&times;</a>
        <p><strong>Some values are invalid, please fix them...</strong></p>
        <ul>
         #{errors}
       		<li>${error}</li>
   		#{/errors}
   		</ul>
      </div>
#{/ifErrors}

<div class="well">
#{form @RegistryController.create()}
		<fieldset>
        		<div class="clearfix">
        			<label for="mvalue">Name</label>
        			<div class="input">
        				<input type="text" name="name" id="name" class="xlarge" value="${name}" size="100"/>
        			</div>
        		</div>
        		<div class="clearfix">
        			<label for="mvalue">URL</label>
        			<div class="input">
        				<input type="text" name="url" id="url" class="xlarge" value="${url}" size="100"/>
        			</div>
        		</div>
	    		<div class="actions">
        			<input class="btn" type="reset" value="Cancel" />
        			<input class="btn primary" type="submit" value="Create" />
        		</div>
        </fieldset>
#{/form}
</div>

#{if services}
	<table class="zebra-striped">
        <thead>
          <tr>
          	<th>#</th>
            <th>Name</th>
            <th>URL</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
        %{int i = 0}%
        #{list services, as : 's'}
          <tr>
          <td align="left">${i++}</td>
            <td><b>${s.name}</b></td>
            <td><a href="${s.baseURL}" target="_blank">${s.baseURL}</a></td>
            <td><a href="@{RegistryController.service(s.name)}" class="btn">Details</a></td>
          </tr>
        #{/list}
        </tbody>
      </table>
#{/if}