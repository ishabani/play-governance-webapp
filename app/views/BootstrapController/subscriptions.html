#{extends 'main.html' /}
#{set title:'Subscriptions' /}

<div class="page-header">
    <h1>Boot Subscriptions</h1>
</div>

<div class="alert alert-success">
	<button type="button" class="close" data-dismiss="alert">Ã—</button>
	<strong>Subscriptions which can be directly send to runtimes</strong>
</div>

<div class="well">
	<a class="btn" href="@{BootstrapController.create()}">Create</a>&nbsp;<a class="btn" href="@{BootstrapController.launchBootSubscriptions()}">Launch all</a>
</div>

#{if subscriptions}
        #{list subscriptions, as : 's'}
        <div class="well">
	        <h4>Subscription # '${s.id}' &nbsp;<small>Created on ${s.date.asdate('dd MMMM yyyy hh:mm:ss')}</small></h4>
	        <h5>Subscriber</h5>
	        <a target="_blank" href="${s.subscriber}">${s.subscriber}</a>
	        
	        <h5>Provider</h5>
	        <a target="_blank" href="${s.provider}">${s.provider}</a>
	
	        <h5>Topic</h5>
	        {<a href="">${s.topic.ns}</a>} ${s.topic.prefix}:<b>${s.topic.name}</b>
	        <br><br>
	        <a href="@{BootstrapController.deleteBoot(s.id, s.subscriber, s.provider, s.topic.name, s.topic.ns, s.topic.prefix)}" class="btn">Delete</a>
        </div>
		#{/list}
#{/if}
#{else}
	<h3>No subscriptions</h3>
#{/else}